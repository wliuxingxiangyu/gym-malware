# -*- coding: utf-8 -*-
import hashlib
import os
import getpass


def rename2sha256():
    username = getpass.getuser()
    parent_dir = "/yiyuan/data/home/"+ username +"/ws/share/0win_share/pe_virus_sha256/"
    to_dir = "/yiyuan/data/home/"+ username +"/ws/other/gym-malware/gym_malware/envs/utils/samples/"
    print("parent_dir "+str(parent_dir))
    print("to_dir "+str(to_dir))

    child_file_list = os.listdir(parent_dir)
    for child_fname in child_file_list:
        with open(parent_dir + child_fname, "rb") as f:
            f_bytes = f.read()  # read entire file as bytes
            sha256 = hashlib.sha256(f_bytes).hexdigest()
            print(sha256)
            os.rename(parent_dir + child_fname, to_dir + str(sha256))
            


def main():
    rename2sha256()


if __name__ == '__main__':
    main()
